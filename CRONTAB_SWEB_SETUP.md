# üïê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Crontab –¥–ª—è Sweb Shared Hosting

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ cPanel Cron Jobs

**–í–ê–ñ–ù–û:** –ó–∞–º–µ–Ω–∏—Ç–µ ` /home/g/gamechann2/western-panda_ru` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É!

---

## ‚úÖ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –ö–û–ú–ê–ù–î–ê (–¥–æ–±–∞–≤—å—Ç–µ –≤ cPanel):

```bash
* * * * * cd /home/g/gamechann2/western-panda_ru && php8.1 artisan schedule:run >> /dev/null 2>&1
```

**–í–ê–ñ–ù–û –¥–ª—è Sweb:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `php8.1` (–∏–ª–∏ –¥—Ä—É–≥—É—é –≤–µ—Ä—Å–∏—é: php8.2, php8.3, php8.4) –≤–º–µ—Å—Ç–æ `/usr/local/bin/php`

**–≠—Ç–∞ –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç –í–°–ï –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏:**

1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤** (`checkout:process-queue`)
   - –ß–∞—Å—Ç–æ—Ç–∞: –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
   - –õ–∏–º–∏—Ç: 100 –∑–∞–∫–∞–∑–æ–≤ –∑–∞ —Ä–∞–∑
   - –ß—Ç–æ –¥–µ–ª–∞–µ—Ç: —Å–æ–∑–¥–∞–µ—Ç –∑–∞–∫–∞–∑—ã –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã, –±—Ä–æ–Ω–∏—Ä—É–µ—Ç —Ç–æ–≤–∞—Ä—ã, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤** (`import:process-queue`)
   - –ß–∞—Å—Ç–æ—Ç–∞: –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
   - –õ–∏–º–∏—Ç: 50 —Ç–æ–≤–∞—Ä–æ–≤ –∑–∞ —Ä–∞–∑
   - –ß—Ç–æ –¥–µ–ª–∞–µ—Ç: –º–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∏–∑ Excel/CSV

3. **–û—Ç–º–µ–Ω–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤** (`orders:cancel-expired`)
   - –ß–∞—Å—Ç–æ—Ç–∞: –∫–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç
   - –ß—Ç–æ –¥–µ–ª–∞–µ—Ç: –æ—Ç–º–µ–Ω—è–µ—Ç –∑–∞–∫–∞–∑—ã —Å—Ç–∞—Ä—à–µ 5 —á–∞—Å–æ–≤ –≤ —Å—Ç–∞—Ç—É—Å–µ "pending", —Å–Ω–∏–º–∞–µ—Ç –±—Ä–æ–Ω—å —Ç–æ–≤–∞—Ä–æ–≤, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞ —Å–∫–ª–∞–¥

4. **–û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–µ—Å—Å–∏–π** (`app:clear-sessions`)
   - –ß–∞—Å—Ç–æ—Ç–∞: —Ä–∞–∑ –≤ –¥–µ–Ω—å (–≤ 00:00)
   - –ß—Ç–æ –¥–µ–ª–∞–µ—Ç: —É–¥–∞–ª—è–µ—Ç –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Å–µ—Å—Å–∏–∏ –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –º–µ—Å—Ç–∞ –≤ –ë–î

---

## üîß –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –ö–û–ú–ê–ù–î–ê (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —Ç–æ–ª—å–∫–æ –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫):

```bash
* * * * * cd /home/g/gamechann2/western-panda_ru && php8.1 artisan queue:work database --sleep=3 --tries=3 --max-time=3600 >> /home/g/gamechann2/western-panda_ru/storage/logs/queue.log 2>&1
```

**–î–ª—è —á–µ–≥–æ –Ω—É–∂–Ω–∞:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `jobs` –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —Ç–æ–≤–∞—Ä–æ–≤
- –û—Ç–ø—Ä–∞–≤–∫–∞ Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- –î—Ä—É–≥–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `--sleep=3` - –ø–∞—É–∑–∞ 3 —Å–µ–∫—É–Ω–¥—ã –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏
- `--tries=3` - –º–∞–∫—Å–∏–º—É–º 3 –ø–æ–ø—ã—Ç–∫–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏
- `--max-time=3600` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ—Å—Ç–∞—Ä—Ç –∫–∞–∂–¥—ã–π —á–∞—Å

**‚ö†Ô∏è –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–ª—è–π—Ç–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –Ω–µ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π

---

## üõí –ö–û–ú–ê–ù–î–´ –î–õ–Ø –†–£–ß–ù–û–ô –û–ë–†–ê–ë–û–¢–ö–ò –û–ß–ï–†–ï–î–ï–ô

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—á–µ—Ä–µ–¥–∏ –≤—Ä—É—á–Ω—É—é (—á–µ—Ä–µ–∑ SSH):

```bash
# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–æ–≤ (checkout_queue)
php8.1 artisan checkout:process-queue

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –∏–º–ø–æ—Ä—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤ (import_queue)
php8.1 artisan import:process-queue

# –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏ –∏–∑ jobs
php8.1 artisan queue:work database --once

# –û—Ç–º–µ–Ω–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
php8.1 artisan orders:cancel-expired
```

---

## üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—é –≤ cPanel Sweb

### –®–∞–≥ 1: –í–æ–π–¥–∏—Ç–µ –≤ cPanel
–û—Ç–∫—Ä–æ–π—Ç–µ: **https://sweb.ru/cpanel** –∏ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å

### –®–∞–≥ 2: –û—Ç–∫—Ä–æ–π—Ç–µ Cron Jobs
–ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"Advanced"** ‚Üí **"Cron Jobs"**

### –®–∞–≥ 3: –î–æ–±–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É
1. –í—ã–±–µ—Ä–∏—Ç–µ **"Common Settings"** ‚Üí **"Once Per Minute (‚ú∂ ‚ú∂ ‚ú∂ ‚ú∂ ‚ú∂)"**
2. –í –ø–æ–ª–µ **"Command"** –≤—Å—Ç–∞–≤—å—Ç–µ:
   ```bash
   cd /home/g/gamechann2/western-panda_ru && php8.1 artisan schedule:run >> /dev/null 2>&1
   ```
3. **–í–ê–ñ–ù–û:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `php8.1` (–∏–ª–∏ php8.2, php8.3, php8.4) - –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/usr/local/bin/php`
4. –ù–∞–∂–º–∏—Ç–µ **"Add New Cron Job"**

### –®–∞–≥ 4: –£–∑–Ω–∞–π—Ç–µ —Å–≤–æ–π –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É
–ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –ø–æ SSH –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
pwd
```

**–ü—Ä–∏–º–µ—Ä—ã –ø—É—Ç–µ–π –Ω–∞ Sweb:**
```
/home/username/domains/example.com/public_html
/home/username/public_html
/home/username/example.com
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ PHP
```bash
which php8.1
# –ù–∞ Sweb –¥–æ—Å—Ç—É–ø–Ω—ã: php8.4, php8.3, php8.2, php8.1, php8.0, php7.4

php8.1 -v
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –≤–µ—Ä—Å–∏—é PHP 8.1.x
```
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: PHP 8.x.x
```

---

## üìã –ì–û–¢–û–í–ê–Ø –ö–û–ú–ê–ù–î–ê –î–õ–Ø –ö–û–ü–ò–†–û–í–ê–ù–ò–Ø

**–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –ø—É—Ç–∏:**

```bash
* * * * * cd /home/YOUR_USERNAME/YOUR_PROJECT_PATH && php8.1 artisan schedule:run >> /dev/null 2>&1
```

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è:**
- –í–∞—à –ª–æ–≥–∏–Ω Sweb: `gamechann2`
- –ü—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É: `western-panda_ru`

**–ò—Ç–æ–≥–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞:**
```bash
* * * * * cd /home/g/gamechann2/western-panda_ru && php8.1 artisan schedule:run >> /dev/null 2>&1
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ù–∞ Sweb –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `php8.1` –ë–ï–ó –ø—É—Ç–∏ `/usr/local/bin/`!

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è cron –∑–∞–¥–∞—á–∏ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–±–æ—Ç–∞—Ç—å:

| –ó–∞–¥–∞—á–∞ | –ß–∞—Å—Ç–æ—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|---------|----------|
| `checkout:process-queue` | –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É | –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤ (–¥–æ 100 —à—Ç/–º–∏–Ω) |
| `import:process-queue` | –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É | –ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤ (–¥–æ 50 —à—Ç/–º–∏–Ω) |
| `orders:cancel-expired` | –ö–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç | –û—Ç–º–µ–Ω–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ + —Å–Ω—è—Ç–∏–µ –±—Ä–æ–Ω–∏ |
| `app:clear-sessions` | –†–∞–∑ –≤ –¥–µ–Ω—å (00:00) | –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–µ—Å—Å–∏–π |

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è cron –∑–∞–¥–∞—á–∏ –ø–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ Laravel
tail -f storage/logs/laravel.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–∏ checkout
php8.1 artisan tinker --execute="echo App\Models\CheckoutQueue::where('status', 'pending')->count();"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –∏–º–ø–æ—Ä—Ç–∞
php8.1 artisan tinker --execute="echo App\Models\ImportQueue::where('status', 'pending')->count();"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
php8.1 artisan tinker --execute="echo DB::table('jobs')->count();"
```

### –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å:

‚úÖ –û—á–µ—Ä–µ–¥—å `checkout_queue` —Å `status='pending'` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
‚úÖ –û—á–µ—Ä–µ–¥—å `import_queue` —Å `status='pending'` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
‚úÖ –ó–∞–∫–∞–∑—ã —Å—Ç–∞—Ä—à–µ 5 —á–∞—Å–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–º–µ–Ω—è—é—Ç—Å—è
‚úÖ –ë—Ä–æ–Ω—å —Ç–æ–≤–∞—Ä–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–º–∞–µ—Ç—Å—è –ø—Ä–∏ –æ—Ç–º–µ–Ω–µ –∑–∞–∫–∞–∑–∞

---

## üö® –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. Cron –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
```bash
# –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
chmod -R 755 storage bootstrap/cache

# –ü—É—Ç—å –∫ PHP –Ω–∞ Sweb
which php8.1
php8.1 -v
```

**–î–ª—è Sweb –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:**
- `php8.1` –∏–ª–∏ `php8.2`, `php8.3`, `php8.4`
- –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/usr/local/bin/php` - —Ç–∞–∫–æ–≥–æ –ø—É—Ç–∏ –ù–ï–¢ –Ω–∞ Sweb!

### 2. –û—à–∏–±–∫–∞ "artisan not found"

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É:**
```bash
pwd
ls -la artisan
```

**–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:**
- –ü—É—Ç—å –≤ cron –∫–æ–º–∞–Ω–¥–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å `pwd`
- –§–∞–π–ª `artisan` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π

### 3. –ó–∞–¥–∞—á–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
```bash
# .env —Ñ–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
ls -la .env

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ—Å—Ç—É–ø–Ω–∞
php8.1 artisan tinker --execute="DB::connection()->getPdo();"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –≤—Ä—É—á–Ω—É—é
php8.1 artisan import:process-queue
```

---

## üéØ –ß–ê–°–¢–´–ï –û–®–ò–ë–ö–ò –ù–ê SWEB

### ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û:
```bash
/usr/local/bin/php artisan schedule:run
/usr/local/bin/php8.1 artisan queue:work
```
**–û—à–∏–±–∫–∞:** `/bin/sh: /usr/local/bin/php: No such file or directory`

### ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û:
```bash
php8.1 artisan schedule:run
php8.1 artisan queue:work database
```

---
