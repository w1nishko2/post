# Система смены цветовых схем

## Описание

Система позволяет пользователям выбирать и применять различные цветовые схемы для интерфейса магазина и админки. Схема сохраняется в профиле пользователя и автоматически применяется при каждом входе.

## Доступные цветовые схемы

1. **Серая** (по умолчанию) - классическая серая схема
2. **Синяя** - современная синяя схема  
3. **Зеленая** - природная зеленая схема
4. **Фиолетовая** - креативная фиолетовая схема
5. **Красная** - энергичная красная схема
6. **Оранжевая** - теплая оранжевая схема
7. **Розовая** - нежная розовая схема
8. **Индиго** - глубокая индиго схема
9. **Бирюзовая** - освежающая бирюзовая схема

## Как использовать

### Для пользователей

1. Перейдите в профиль пользователя: `/profile`
2. Найдите секцию "Цветовая схема интерфейса"
3. Выберите желаемую схему из доступных вариантов
4. Используйте кнопку "Предварительный просмотр" для тестирования
5. Нажмите "Применить схему" для сохранения

### Для разработчиков

#### Добавление новых схем

Добавьте новую схему в файл `config/color-schemes.php`:

```php
'new_scheme' => [
    'name' => 'Название схемы',
    'description' => 'Описание схемы',
    'preview_color' => '#hex_color',
    'colors' => [
        '--color-primary' => '#hex_color',
        '--color-gray' => '#hex_color',
        '--color-dark-gray' => '#hex_color',
        '--color-light-gray' => '#hex_color',
        '--color-border' => '#hex_color',
    ],
],
```

#### CSS переменные

Используйте CSS переменные в стилях:

```css
.element {
    color: var(--color-gray);
    border-color: var(--color-border);
    background-color: var(--color-light-gray);
}
```

#### Получение схемы пользователя

```php
$user = Auth::user();
$currentScheme = $user->getColorScheme(); // Возвращает код схемы
$schemeInfo = $user->getColorSchemeInfo(); // Возвращает полную информацию
$cssVars = $user->getColorSchemeCss(); // Возвращает CSS переменные
```

## Техническая реализация

### Компоненты системы

1. **Миграция** - добавляет поле `color_scheme` в таблицу `users`
2. **Модель User** - методы для работы с цветовыми схемами
3. **Конфигурация** - файл `config/color-schemes.php` с доступными схемами
4. **Контроллер** - `ProfileController` с методами смены схемы
5. **Компонент** - `color-scheme-selector.blade.php` для выбора схемы
6. **Middleware** - `ApplyUserColorScheme` для автоматического применения
7. **CSS** - обновленные переменные в `app.css` и `mini-app.css`

### Автоматическое применение

Middleware `ApplyUserColorScheme` автоматически:
- Определяет цветовую схему пользователя
- Генерирует CSS переменные
- Вставляет их в HTML ответ

### Предварительный просмотр

JavaScript в компоненте позволяет:
- Просмотреть схему без сохранения
- Вернуться к оригинальной схеме
- Применить выбранную схему

## Файлы системы

```
app/
├── Http/
│   ├── Controllers/ProfileController.php (обновлен)
│   └── Middleware/ApplyUserColorScheme.php (новый)
├── Models/User.php (обновлен)
config/
└── color-schemes.php (новый)
database/
└── migrations/xxxx_add_color_scheme_to_users_table.php (новый)
resources/
├── css/
│   ├── app.css (обновлен)
│   └── mini-app.css (обновлен)
└── views/
    ├── components/color-scheme-selector.blade.php (новый)
    └── profile/show.blade.php (обновлен)
routes/
└── web.php (обновлен)
```

## Возможные улучшения

1. **Темная тема** - добавить поддержку светлой/темной темы
2. **Кастомные цвета** - позволить пользователям создавать собственные схемы
3. **Импорт/экспорт** - сохранение схем в файлы
4. **Предустановки** - схемы для разных типов бизнеса
5. **Анимации** - плавные переходы между схемами
6. **Доступность** - проверка контрастности для людей с нарушениями зрения

## Поддержка

Система полностью совместима с существующим дизайном и не нарушает функциональность приложения. Все изменения обратимы - при удалении поля `color_scheme` система вернется к стандартному поведению.